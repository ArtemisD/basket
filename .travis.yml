language: node_js
sudo: required
services:
- docker
before_install:
- docker --version
- pip install --user awscli
- export PATH=$PATH:$HOME/.local/bin
- eval $(aws ecr get-login --no-include-email --region us-east-2)
install:
- docker build -t basket .
script:
- docker run -it -p 8000:8000 basket npm test

deploy:
  provider: elasticbeanstalk
  access_key_id: AKIAJAUQER3J3AKWB3CQ
  secret_access_key:
    secure: AWS_SECRET_ACCESS_KEY
  region: us-east-1
  app: thesis2
  env: thesistest
  bucket_name: elasticbeanstalk-us-east-1-767596259046

env:
  matrix:
    secure: ZslCkOhQcXJRss7OtR9ZFSgqCACMNDfUN9vtySrpZrC3GP4gdRBJY6rDuRbZ5TKYxI2d4kcAzXJUTF4vLD/PgMoDRTbXEltsgCFCoVG211wwv9C37ZHFQnkKXfcHsAqqd8k/8diwMTS/oLFuXhWvCiWdpL7pj3VW6CAfu3uwGkn1TuMQ3rWkH2UKJN0iPSY1cX6gCRzxNLDxe5QCPXJyNzuh7mUqcw4ca2Bz+x4IgXgWzesqBOgNO909F/+KxsXmALjOaslrIx41izLwtmBkECzGQFD/ROm4+FhoMV5R+uAHUXi6U9JcCHSWGMmlAtBrI7JkL0mAmk/zX0N7moqoHPxELKw4pPTW0h0h153Xb1uVuvET8kneu3d0OyQKQHTcOgBXj+CE2f+0oTQ2P1NIOzb431YHxfJJo4aEBlxmAzca9PI78wbb1Z53evleeEG+bgehZ+CofZBhnjG0JsiNTXapFmbjiau8xalGfTsAeZxvvjvArKvIfM4Jjg7nPIvlmcMEh3F5/nRmQ+AceKGZroddNJr22q+zy98ssA2yNRnnR0zMYgDSBlgDjnjYs6gM5+EbyLkpsQx1yiJZMaH7AZBT2IhRsZW1PJCfhWS1mGoKvY/tgoWpWqTpz6eXirMGhc+3QykTkPb8I+DHMzM9WlqVUoiwA16olco5bbF8yjE=
